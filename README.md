# Tyloo-Chat(ä»¿wechat)
[![author](https://img.shields.io/badge/author-BoBoooooo-blue.svg)](https://github.com/BoBoooooo)
[![author](https://img.shields.io/github/languages/top/BoBoooooo/tyloo-chat)](https://github.com/BoBoooooo/tyloo-chat)
[![Node.js Version](https://img.shields.io/badge/node.js-10.16.3-blue.svg)](http://nodejs.org/download)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://github.com/BoBoooooo/tyloo-chat/LICENSE)
[![author](https://img.shields.io/github/stars/BoBoooooo/tyloo-chat?style=social)](https://github.com/BoBoooooo/tyloo-chat)

## è¯´æ˜
æœ¬é¡¹ç›®forkè‡ª[genal-chat]('https://github.com/genaller/genal-chat.git')åšäº†ä¼˜åŒ–å‡çº§,æ„Ÿè°¢å¤§ä½¬`Genal`å¼€æºæä¾›æ€è·¯!

ç›®å‰è¿˜åœ¨æŠ½ç©ºæŒç»­ä¼˜åŒ–ä¸­,æ•¬è¯·æœŸå¾…!!!

è§‰å¾—è¿˜ä¸é”™çš„è¯å¯ä»¥ç‚¹ä¸ªStaré¼“åŠ±ä¸€ä¸‹!!!

## ğŸš€ Electronç‰ˆæœ¬å®¢æˆ·ç«¯å·²å‡ºç‚‰,è¯¦è§release

## ğŸš€ æ¬¢è¿å„ä½å¤§ä½¬æææ„è§å»ºè®®/Bugåé¦ˆ qqç¾¤`289438105`

## [ğŸ–Tyloo-Chatçº¿ä¸Šdemoåœ°å€](http://tyloochat.fun:9999/)
**tips: éº»çƒ¦å„ä½ç»¿è‰²èŠå¤©,ä¸è¦å¼€è½¦,ä¸è¦ä¸Šä¼ å¤ªå¤§çš„æ–‡ä»¶,æœåŠ¡å™¨æ¯”è¾ƒåƒåœ¾..**

## éƒ¨åˆ†åŠŸèƒ½æˆªå›¾
- æ•´ä½“ç•Œé¢

![](./assets/demo1.png)
- é€šè®¯å½•

![](./assets/demo2.png)

- ç¾¤èŠåŠŸèƒ½(ç¾¤æˆå‘˜åˆ—è¡¨,åœ¨çº¿çŠ¶æ€,æ”¯æŒæ·»åŠ ç¾¤æˆå‘˜)
![](./assets/demo3.png)
- ä¼šè¯åˆ—è¡¨(ç½®é¡¶/åˆ é™¤)

![](./assets/demo5.png)
- æ¶ˆæ¯æ’¤å›åŠŸèƒ½

![](./assets/demo4.png)

## Electronç‰ˆæœ¬å®¢æˆ·ç«¯(ä½äºelectron_versionåˆ†æ”¯)
- windowsç‰ˆæœ¬(exe)

![](./assets/electron1.png)

- macç‰ˆæœ¬(dmg)

![](./assets/electron2.png)
## Feature
- ç”¨æˆ·ç™»é™†æ³¨å†Œ (æ”¯æŒåµŒå…¥ç¬¬ä¸‰æ–¹ç³»ç»Ÿå•ç‚¹ç™»é™†)
    - [å•ç‚¹ç™»é™†åœ°å€](http://server.boboooooo.top:9998),ç™»å½•åç‚¹å‡»å³ä¸Šè§’åœ¨çº¿äº¤æµæŒ‰é’®
- ç¾¤èŠ (ç±»ä¼¼qqç¾¤)
    - é‚€è¯·å¥½å‹åŠ å…¥ç¾¤èŠ
    - ä¿®æ”¹ç¾¤å/ç¾¤å…¬å‘Š
- å¥½å‹åŠŸèƒ½
- é€šè®¯å½•åŠŸèƒ½(æ”¯æŒæ¥å…¥ç¬¬ä¸‰æ–¹ç³»ç»Ÿç»„ç»‡æ¶æ„,ç›´æ¥å‘èµ·èŠå¤©)
- èŠå¤©åŠŸèƒ½
    - Emojiè¡¨æƒ…åŒ…
    - å›¾ç‰‡å‘é€/å›¾ç‰‡é¢„è§ˆ
    - å‘é€é™„ä»¶
    - æ¶ˆæ¯åˆ†é¡µ
    - æ¶ˆæ¯æ’¤å›/å¤åˆ¶
- è‡ªå®šä¹‰ä¸»é¢˜
- ä¼šè¯ç½®é¡¶/åˆ é™¤
- é‡è¿æé†’
- **æ™ºèƒ½åŠ©æ‰‹(é»˜è®¤,ä½äºmainåˆ†æ”¯,é‡‡ç”¨ESæœç´¢å¼•æ“éœ€è¦æ‰‹åŠ¨åˆ›å»ºESè¯åº“)**
- **ç¬¬ä¸‰æ–¹APIæœºå™¨äºº(å½“å‰çº¿ä¸Šdemoç‰ˆæœ¬,ä½äºfeature_APIROBOTåˆ†æ”¯)**
- **Electronç‰ˆæœ¬(ä½äºelectron_versionåˆ†æ”¯,æ”¯æŒç”Ÿæˆdmg,exeå®¢æˆ·ç«¯)**
## æŠ€æœ¯æ ˆ
- **å‰ç«¯**
	- **vue cli 4.x**
    - **Antd for vue**
- **åç«¯**
	- **NestJS**
    - **TypeORM**
	- **Mysql**
- **Socket.io**

- **ElasticSearch** ESæœç´¢å¼•æ“(ç”¨äºæœºå™¨äººå¿«æ·è‡ªåŠ¨å›å¤)
- **[Nodejieba](https://github.com/yanyiwu/nodejieba)** nodeç‰ˆæœ¬ä¸­æ–‡åˆ†è¯å™¨
## æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡
![](./assets/database.png)

## ç¯å¢ƒå‡†å¤‡
- mysql
- chatæ•°æ®åº“ (éœ€è¦æ‰‹åŠ¨åˆ›å»º,**æ³¨æ„æ•°æ®åº“ç¼–ç æ ¼å¼ä¸º `utf8bm64``utf8bm64``utf8bm64` !!!**)
- node v10.16.3

## æ‹‰å–ä»£ç æ—¶æ³¨æ„äº‹é¡¹

```
// windowsç³»ç»Ÿéœ€è¦é…ç½®ä¸€ä¸‹,æäº¤æ—¶è½¬æ¢ä¸ºLFï¼Œæ£€å‡ºæ—¶ä¸è½¬æ¢
git config --global core.autocrlf input
```

```
// è®¾ç½®ä¸ºåŒºåˆ†å¤§å°å†™
git config core.ignorecase false
```

## è¿è¡Œé¡¹ç›®
```js
// client
cd client 
cnpm i
npm start
```

```js
// server
cd server
cnpm i
npm run start
```

## å¦‚ä½•éƒ¨ç½²

[Deploy](./deploy.md)

[CentOSä¸‹éƒ¨ç½²èŠå¤©å®¤](https://notes.zhangxiaocai.cn/posts/39142aea.html)

## ç¬¬ä¸‰æ–¹é›†æˆ/å•ç‚¹ç™»é™†

- ç¬¬ä¸‰æ–¹ç³»ç»Ÿé‡ŒåµŒå…¥å¦‚ä¸‹è·³è½¬ä»£ç ,éœ€è¦æºå¸¦`userId`ä»¥åŠ`username`å‚æ•°

``` javascript
let chatUrl // å½“å‰èŠå¤©å®¤å®¢æˆ·ç«¯åœ°å€
let userId // å½“å‰ç³»ç»Ÿç”¨æˆ·userId
let username // å½“å‰ç³»ç»Ÿç”¨æˆ·æ˜µç§°

window.open(`${chatUrl}?userId=${userId}&username=${username}`);

```

- èŠå¤©å®¤è·å–å‚æ•°å¹¶è‡ªåŠ¨å®Œæˆç™»é™†(è‹¥ä¸ºé¦–æ¬¡ç™»é™†ä¼šè‡ªåŠ¨æ³¨å†Œè´¦å·)

- è®¾ç½®èŠå¤©å®¤client `VUE_APP_ORG_URL` ä¸ºè·å–ç¬¬ä¸‰æ–¹ç³»ç»Ÿç»„ç»‡æ¶æ„çš„æ¥å£åœ°å€

    - è®¾ç½®VUE_APP_ORG_URL
    ``` javascript

    // .env.xxx
    // æ­¤æ¥å£å¯ä»¥è·å–åˆ°ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„æ‰€æœ‰éƒ¨é—¨å’Œäººå‘˜ä¿¡æ¯,æ³¨æ„ä¸ºåµŒå¥—treeç»“æ„
    VUE_APP_ORG_URL=http://127.0.0.1:8080/api/getDeptUsersTree

    ```

    - åˆ‡æ¢åˆ°è”ç³»äººç•Œé¢è‡ªåŠ¨å‘å‡ºè¯·æ±‚
    ``` javascript
    // Contact.vue
    axios.post(process.env.VUE_APP_ORG_URL).then((res) => {
        this.organizationArr = res.data.data;
    });
    ```

    - è¿”å›å€¼æ ¼å¼å¦‚ä¸‹
    ``` javascript
    interface node {
        id: string; // id
        label: string;// åç§°
        flag: boolean;// æ˜¯å¦æœ‰ä¸‹çº§ç»“ç‚¹
        children: node[];// ä¸‹çº§ç»“ç‚¹
    }
    ```
    - è‹¥ä¸éœ€è¦é›†æˆç¬¬ä¸‰æ–¹ç»„ç»‡æ¶æ„æ¸…ç©º`VUE_APP_ORG_URL`å³å¯,å…¶ä»–æƒ…å†µè‡ªè¡Œå®šåˆ¶ä¿®æ”¹ã€‚

## æ€è·¯æ¦‚è¿°
[webSocketå»ºç«‹æµç¨‹](./webSocketå»ºç«‹æµç¨‹.md)
## TODO
- `@åŠŸèƒ½å®ç°`
- `æ¶ˆæ¯è½¬å‘`
- `ä»£ç æ€§èƒ½ä¼˜åŒ–`
- `ç¾¤èŠåŠŸèƒ½ç»§ç»­å®Œå–„`
- `å¾®ä¿¡å¿«æ·ç™»é™†`
- `Electronå®¢æˆ·ç«¯æ£€æŸ¥æ›´æ–°`
